<div ng-controller="UpdateUserCtrl">
<div class="modal-header">
    <h3>Update User Details</h3>
</div>
<div class="modal-body">
<div>
<div class="btn-group">
    <button class="btn" ng-class="{'btn-primary':isCurrentStep(0)}" ng-click="setCurrentStep(0)">User</button>
    <button class="btn" ng-class="{'btn-primary':isCurrentStep(1)}" ng-show="isEmployee()"
            ng-click="setCurrentStep(1)">Work Details
    </button>
    <button class="btn" ng-class="{'btn-primary':isCurrentStep(2)}" ng-click="setCurrentStep(2)">Contact Details
    </button>
</div>

<div ng-switch="getCurrentStep()" ng-animate="'wave'" class="slide-frame">
<div ng-switch-when="one">
    <fieldset>
        <br>

        <div class="form-group form-group-wizard">
            <label class="col-lg-3 control-label">Username</label>
            <label class="col-lg-9">{{user.username}}</label>
        </div>
        <div class="form-group form-group-wizard">
            <label class="col-lg-3 control-label">User Type</label>

            <div class="col-lg-9">
                <label>{{userType.type}}</label>
            </div>
        </div>
        <hr>
        <h4>Change Password</h4>

        <div class="form-group form-group-wizard">
            <label class="col-lg-3 control-label">Old Password</label>

            <div class="col-lg-9">
                <input ng-model="userPassword.oldPass" type="password" class="form-control"
                       placeholder="Old Password" ng-change="userPasswordChanged()"/>
            </div>
        </div>
        <div class="form-group form-group-wizard">
            <label class="col-lg-3 control-label">New Password</label>

            <div class="col-lg-9">
                <input ng-model="userPassword.newPass" type="password" class="form-control"
                       placeholder="New Password" ng-change="userPasswordChanged()"/>
            </div>
        </div>
        <div class="form-group form-group-wizard">
            <label class="col-lg-3 control-label">Confirm Password</label>

            <div class="col-lg-9">
                <input ng-model="userPassword.confirmPass" type="password" class="form-control"
                       placeholder="Confirm Password" ng-change="userPasswordChanged()"/>
            </div>
        </div>
        <br>
        <hr>
        <h4>Change User State</h4>

        <div class="form-group form-group-wizard">
            <label class="col-lg-3 control-label">User State</label>

            <div class="col-lg-9">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" ng-model="user.accountStatus" ng-change="userAccountStateChanged()"/>
                        Activate user
                    </label>
                </div>
            </div>
        </div>
    </fieldset>
</div>
<div ng-switch-when="two">
    <fieldset>
        <br>
        <h4>Change Names</h4>

        <div class="form-group form-group-wizard">
            <label class="col-lg-3 control-label">Surname</label>

            <div class="col-lg-9">
                <input ng-model="employee.surname" type="text" class="form-control" placeholder="Surname"
                       ng-change="employeeNameChanged()">
            </div>
        </div>
        <div class="form-group form-group-wizard">
            <label class="col-lg-3 control-label">Initials</label>

            <div class="col-lg-9">
                <input ng-model="employee.initials" type="text" class="form-control" placeholder="Initials"
                       ng-change="employeeNameChanged()">
            </div>
        </div>
        <div class="form-group form-group-wizard">
            <label class="col-lg-3 control-label">Name referred by initials</label>

            <div class="col-lg-9">
                <input ng-model="employee.nameReferredByInitials" type="text" class="form-control"
                       placeholder="Name referred by initials" ng-change="employeeNameChanged()">
            </div>
        </div>
        <br>
        <hr>
        <h4>Change User Roles</h4>

        <div class="form-group form-group-wizard">
            <div class="col-lg-12 table-responsive">
                <table class="table table-hover">
                    <thead>
                    <tr>
                        <th>Role</th>
                        <th>Status</th>
                        <th>Assign Date</th>
                        <th>Resign Date</th>
                        <th></th>
                    </tr>
                    </thead>

                    <tbody>
                    <tr>
                        <td colspan="3">
                            <select ng-model="userRole.role1.roleId" class="form-control">
                                <option ng-repeat="role in roles" value={{role.roleId}}>{{role.description}}</option>
                            </select>
                        </td>
                        <td>
                            <button type="button" class="btn btn-default btn-sm" ng-click="addRole()">
                                <span class="glyphicon glyphicon-plus"></span> Add
                            </button>
                        </td>
                    </tr>
                    <tr ng-repeat="userRole in userRoles">
                        <td>{{ userRole.role1.description }}</td>
                        <td>
                            <button type="button" class="btn btn-default btn-sm" ng-model="userRole.active" bs-button
                                    ng-click="activateRole($index)"  data-toggle="button">
                                <span class="glyphicon"
                                      ng-class="{'glyphicon-check': userRole.active, 'glyphicon-unchecked': ! userRole.active}"/>
                                {{userRole.active && 'Activated' || 'Deactivated'}}
                            </button>
                        </td>
                        <td>
                            {{ userRole.userRolePK.assignDate | date:'yyyy-MM-dd HH:mm:ss Z'}}
                        </td>
                        <td>
                            {{ userRole.resignDate | date:'yyyy-MM-dd HH:mm:ss Z'}}
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </fieldset>
</div>
<div ng-switch-when="three">
    <fieldset>
        <br>

        <div class=" form-group form-group-wizard">
            <label class="col-lg-3 control-label">Name</label>

            <div class="col-lg-9">
                <input ng-model="contactDetails.name" type="text" class="form-control" placeholder="Name"
                       ng-change="contactDetailsChanged()">
            </div>
        </div>
        <div class=" form-group form-group-wizard">
            <label class="col-lg-3 control-label">Email</label>

            <div class="col-lg-9">
                <input ng-model="contactDetails.email" type="email" class="form-control" placeholder="Email"
                       ng-change="contactDetailsChanged()">
            </div>
        </div>
        <div class=" form-group form-group-wizard">
            <label class="col-lg-3 control-label">Address Line 1</label>

            <div class="col-lg-9">
                <input ng-model="contactDetails.addressLine1" type="text" class="form-control"
                       placeholder="Address Line 1" ng-change="contactDetailsChanged()">
            </div>
        </div>
        <div class=" form-group form-group-wizard">
            <label class="col-lg-3 control-label">Address Line 2</label>

            <div class="col-lg-9">
                <input ng-model="contactDetails.addressLine2" type="text" class="form-control"
                       placeholder="Address Line 2" ng-change="contactDetailsChanged()">
            </div>
        </div>
        <div class=" form-group form-group-wizard">
            <label class="col-lg-3 control-label">City</label>

            <div class="col-lg-9">
                <input ng-model="contactDetails.city" type="text" class="form-control" placeholder="City"
                       ng-change="contactDetailsChanged()">
            </div>
        </div>
        <div class=" form-group form-group-wizard">
            <label class="col-lg-3 control-label">Province</label>

            <div class="col-lg-9">
                <input ng-model="contactDetails.province" type="text" class="form-control"
                       placeholder="Province" ng-change="contactDetailsChanged()">
            </div>
        </div>
        <div class=" form-group form-group-wizard">
            <label class="col-lg-3 control-label">Postal Code</label>

            <div class="col-lg-9">
                <input ng-model="contactDetails.postalCode" type="text" class="form-control"
                       placeholder="Postal Code" ng-change="contactDetailsChanged()">
            </div>
        </div>
        <div class=" form-group form-group-wizard">
            <label class="col-lg-3 control-label">Country</label>

            <div class="col-lg-9">
                <input ng-model="contactDetails.country" type="text" class="form-control" placeholder="Country"
                       ng-change="contactDetailsChanged()">
            </div>
        </div>
        <div class=" form-group form-group-wizard">
            <label class="col-lg-3 control-label">Telephone Number</label>

            <div class="col-lg-9">
                <input ng-model="contactDetails.phoneNumber" type="text" class="form-control"
                       placeholder="Telephone Number" ng-change="contactDetailsChanged()">
            </div>
        </div>
    </fieldset>
</div>
</div>
</div>
</div>
<div class="modal-footer">
    <a class="btn" ng-click="handlePrevious()" ng-show="!isFirstStep()">Back</a>
    <a class="btn btn-primary" ng-show="!isLastStep()" ng-click="handleNext()">Next</a>
    <a class="btn btn-primary" ng-click="update()">Save</a>
</div>
</div>